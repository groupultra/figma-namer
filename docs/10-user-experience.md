# 用户交互体验文档

## 用户操作流程

### Step 1: 启动插件
用户在 Figma 中选中一个 Frame 或 Page，通过 Plugins 菜单启动 "Figma Namer"。

### Step 2: 输入全局上下文
```
┌──────────────────────────────────┐
│  🏷️ Figma Namer                  │
│                                   │
│  Global Context:                  │
│  ┌─────────────────────────────┐ │
│  │ 这是一个医疗SaaS系统的      │ │
│  │ iPad端门诊大屏              │ │
│  └─────────────────────────────┘ │
│                                   │
│  Platform: [iOS ▼]               │
│                                   │
│  [▶ Start Naming]                │
└──────────────────────────────────┘
```

### Step 3: AI 处理中
```
┌──────────────────────────────────┐
│  🏷️ Figma Namer                  │
│                                   │
│  Processing batch 2/5...          │
│  ████████████░░░░░░░░ 40%        │
│                                   │
│  ┌─────────────────────────────┐ │
│  │  [SoM marked image preview] │ │
│  │  showing red boxes with     │ │
│  │  numbered labels            │ │
│  └─────────────────────────────┘ │
│                                   │
│  Elapsed: 12s                     │
│  [Cancel]                         │
└──────────────────────────────────┘
```

### Step 4: 预览命名结果
```
┌──────────────────────────────────┐
│  🏷️ Figma Namer - Preview        │
│                                   │
│  [Select All] [Deselect] 23/25   │
│  ┌──────────────────────────────┐│
│  │ ☑ #1 Frame 123               ││
│  │   → Login Button - Disabled  ││
│  │     - Android - Primary      ││
│  │                          [✏️] ││
│  │──────────────────────────────││
│  │ ☑ #2 Rectangle 45            ││
│  │   → Email InputField - Error ││
│  │     - Web                    ││
│  │                          [✏️] ││
│  │──────────────────────────────││
│  │ ☐ #3 Group 8                 ││
│  │   → App Logo - Default       ││
│  │                          [✏️] ││
│  └──────────────────────────────┘│
│                                   │
│  [Cancel]  [✅ Apply 23 Names]   │
└──────────────────────────────────┘
```

### Step 5: 完成
```
┌──────────────────────────────────┐
│  🏷️ Figma Namer                  │
│                                   │
│  ✅ Done!                         │
│                                   │
│  23 layers renamed successfully   │
│  2 layers skipped                 │
│                                   │
│  Time: 45s                        │
│  Tokens used: 3,200               │
│                                   │
│  [🔄 Start New Session]          │
└──────────────────────────────────┘
```

## 边界情况处理
- **未选中任何元素**: 提示用户先选中 Frame
- **选中过多元素** (>500): 警告并建议分批处理
- **网络错误**: 显示重试按钮
- **VLM 返回格式异常**: 降级为部分结果展示
- **命名冲突**: 不同元素生成相同名称时自动加后缀

## 准备真实 Figma 测试
当所有基础设施就绪后，用户需要：
1. 提供 Figma 账号登录
2. 选择一个真实的设计稿文件
3. 选中要命名的 Frame
4. 提供 VLM API Key（存入 Vercel 环境变量）
5. 运行端到端测试
